(this["webpackJsonpmy-web"]=this["webpackJsonpmy-web"]||[]).push([[0],{103:function(e,t,r){var n=r(54),a=r(47),o=r(6),c=r(15),i=r(39),s=r(40);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={Entry:r(55),Projection:r(41)},f=function(){"use strict";function e(t,r){i(this,e),this.create=this.create.bind({storage:t,dependencies:l({},p,{},r)})}return s(e,[{key:"create",value:function(e){var t;return o.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={projection:null,entry:null},e.onStart(),r.prev=2,r.next=5,o.awrap(b.call(this,e));case 5:t=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),e.onError(r.t0);case 11:return e.onEnd(),r.abrupt("return",t);case 13:case"end":return r.stop()}}),null,this,[[2,8]])}}]),e}();function b(e){var t,r,n,c,i,s;return o.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.projectionId,r=e.entry,u.next=3,o.awrap(Promise.all([h.call(this,t),y.call(this,r)]));case 3:return n=u.sent,c=a(n,2),i=c[0],s=c[1],i.addEntry(s),u.next=10,o.awrap(this.storage.updateProjection(i));case 10:return u.abrupt("return",{projection:i,entry:s});case 11:case"end":return u.stop()}}),null,this)}function h(e){var t,r,a,c,i,s,u;return o.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e){p.next=2;break}throw new Error("Cannot create an entry without projectionId");case 2:return t=this.dependencies,r=t.Projection,a=t.Entry,p.next=5,o.awrap(this.storage.readProjectionById(e));case 5:return c=p.sent,i=c.entries,s=n(c,["entries"]),u=new r(l({},s,{entries:i.map((function(e){return new a(e)}))})),p.abrupt("return",u);case 10:case"end":return p.stop()}}),null,this)}function y(e){var t,r,n;return o.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw new Error("Cannot create an entry without its data");case 2:return t=this.dependencies.Entry,r=new t(e),a.next=6,o.awrap(this.storage.createEntry(r));case 6:return n=a.sent,a.abrupt("return",n);case 8:case"end":return a.stop()}}),null,this)}e.exports=f},105:function(e,t,r){var n=r(6),a=r(15),o=r(39),c=r(40);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={Projection:r(41)},l=function(){"use strict";function e(t,r){o(this,e),this.create=this.create.bind({storage:t,dependencies:s({},u,{},r)})}return c(e,[{key:"create",value:function(e){var t,r,a;return n.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.dependencies.Projection,r={projection:null},e.onStart(),o.prev=3,a=new t(s({},e.projection,{entries:[]})),o.next=7,n.awrap(this.storage.createProjection(a));case 7:r.projection=o.sent,o.next=13;break;case 10:o.prev=10,o.t0=o.catch(3),e.onError(o.t0);case 13:return e.onEnd(),o.abrupt("return",r);case 15:case"end":return o.stop()}}),null,this,[[3,10]])}}]),e}();e.exports=l},106:function(e,t,r){var n=r(54),a=r(6),o=r(15),c=r(39),i=r(40);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={Entry:r(55),Projection:r(41),Scenario:r(107)},p=function(){"use strict";function e(t,r){c(this,e),this.read=this.read.bind({storage:t,dependencies:u({},l,{},r)})}return i(e,[{key:"read",value:function(e){var t;return a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={scenario:null},e.onStart(),r.prev=2,r.next=5,a.awrap(f.call(this,e));case 5:t.scenario=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),e.onError(r.t0);case 11:return e.onEnd(),r.abrupt("return",t);case 13:case"end":return r.stop()}}),null,this,[[2,8]])}}]),e}();function f(e){var t,r,n;return a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.dependencies.Scenario,o.next=3,a.awrap(b.call(this,e.projectionId));case 3:return r=o.sent,n=new t({projection:r}),e.onSuccess(n),o.abrupt("return",n);case 7:case"end":return o.stop()}}),null,this)}function b(e){var t,r,o,c,i,s,l;return a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return t=this.dependencies,r=t.Projection,o=t.Entry,p.next=3,a.awrap(this.storage.readProjectionById(e));case 3:return c=p.sent,i=c.entries,s=n(c,["entries"]),l=new r(u({},s,{entries:i.map((function(e){return new o(e)}))})),p.abrupt("return",l);case 8:case"end":return p.stop()}}),null,this)}e.exports=p},107:function(e,t,r){var n=r(15),a=r(108);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){var t=e.reduce((function(e,t){return e+t.value}),0);return{total:t,entries:e.reduce((function(e,r){return[].concat(a(e),[c({},r,{share:r.share(t)})])}),[])}}e.exports=function(e){var t=e.projection;return Object.defineProperty(this,"incoming",{get:function(){return i(t.incoming)}}),Object.defineProperty(this,"expenses",{get:function(){return i(t.expenses)}}),Object.defineProperty(this,"difference",{get:function(){return this.incoming.total+this.expenses.total}}),this}},112:function(e,t,r){},115:function(e,t,r){},116:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(9),c=r.n(o),i=(r(78),r(63)),s=r(56),u=r.n(s),l=r(36),p=r(6),f=r.n(p),b=function(){var e=JSON.parse(localStorage.getItem("my-money/app/nextEntryId")||0)+1;return localStorage.setItem("my-money/app/nextEntryId",e),e},h={read:function(e){var t,r,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,f.a.awrap(this.readAll());case 3:if(r=a.sent,n=r[t]){a.next=7;break}return a.abrupt("return");case 7:return a.abrupt("return",Object.assign({},n));case 8:case"end":return a.stop()}}),null,this)},create:function(e){var t,r;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(l.a)({},e,{id:b()}),n.next=3,f.a.awrap(this.readAll());case 3:if(!(r=n.sent)[t.id]){n.next=6;break}return n.abrupt("return",this.create(e));case 6:return r[t.id]=t,localStorage.setItem("my-money/entries",JSON.stringify(r)),n.abrupt("return",t);case 9:case"end":return n.stop()}}),null,this)},readAll:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("my-money/entries")||"{}",t.abrupt("return",JSON.parse(e));case 2:case"end":return t.stop()}}))}},y=r(42),d={read:function(e){var t,r,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,f.a.awrap(this.readAll());case 3:if(r=a.sent,n=r[t]){a.next=7;break}return a.abrupt("return");case 7:return a.abrupt("return",Object.assign({},n));case 8:case"end":return a.stop()}}),null,this)},update:function(e){var t,r,n,a,o;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,r=e.incoming,n=e.expenses,c.next=3,f.a.awrap(this.read({id:t}));case 3:if(a=c.sent){c.next=6;break}return c.abrupt("return");case 6:return a.entries=[].concat(Object(y.a)(r),Object(y.a)(n)).map((function(e){return e.id})),c.next=9,f.a.awrap(this.readAll());case 9:(o=c.sent)[t]=a,localStorage.setItem("my-money/projections",JSON.stringify(o));case 12:case"end":return c.stop()}}),null,this)},readAll:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("my-money/projections")||"{}",t.abrupt("return",JSON.parse(e));case 2:case"end":return t.stop()}}))},create:function(e){var t,r,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Date.now(),r=Object(l.a)({},e,{id:btoa(t),timestamp:t,entries:[]}),a.next=4,f.a.awrap(this.readAll());case 4:if(!(n=a.sent)[r.id]){a.next=7;break}return a.abrupt("return",this.create(e));case 7:return n[r.id]=r,localStorage.setItem("my-money/projections",JSON.stringify(n)),a.abrupt("return",r);case 10:case"end":return a.stop()}}),null,this)}},O=new u.a({entry:h,projection:d}),j=r(57),v=r(58),g=r(7),w=r(26),m=r(59),E=r.n(m),P=r(60),x=r.n(P),S=r(61),D=r.n(S),C=function(){function e(t,r){Object(j.a)(this,e),this.storage=t,this.notifier=r,this.createEntry=new E.a(this).create,this.readScenario=new D.a(this).read}return Object(v.a)(e,[{key:"init",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.awrap(this.storage.init());case 3:if(!this.isEmpty){e.next=6;break}return e.next=6,f.a.awrap(k.call(this));case 6:I.call(this),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),N.call(this,e.t0);case 12:case"end":return e.stop()}}),null,this,[[0,9]])}},{key:"isEmpty",get:function(){var e=this.storage.projections;return!(void 0===e?[]:e).length}}]),e}();function k(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new x.a(this).create,t.next=3,f.a.awrap(e({projection:{title:"Standard"},onStart:Function.prototype,onError:function(e){throw e},onEnd:Function.prototype}));case 3:case"end":return t.stop()}}),null,this)}function I(){this.isLoading=!1,this.hasLoadingError=!1,this.projection=this.storage.projections[0]}function N(e){w.NotificationManager.error("Try again later","Initializing app failed",5e3),console.log(e),this.isLoading=!1,this.hasLoadingError=!0}Object(g.h)(C,{isLoading:g.m,hasLoadingError:g.m,projection:g.m,init:g.d});var F=C,L=r(64),A=(r(112),r(113),r(22)),M=Intl&&Intl.NumberFormat?new Intl.NumberFormat:{format:function(e){return e.toLocaleString?e.toLocaleString():e.toFixed(2)}};function U(e){var t=e.entries,r=t.entries,n=t.total,o=e.name;return a.a.createElement(a.a.Fragment,null,r.map(J),a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"3"},o),a.a.createElement(R,{value:n})))}function J(e){var t=e.id,r=e.source,n=e.value,o=e.isDisabled,c=e.share;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,r),a.a.createElement(R,{value:n}),a.a.createElement(B,{value:c}),a.a.createElement("td",null,a.a.createElement("input",{type:"checkbox",checked:o,disabled:!0})))}function B(e){var t=e.value,r=parseInt((100*t).toFixed(2),10);return a.a.createElement("td",null,Number.isNaN(r)?0:M.format(r)," %")}function R(e){var t=e.value,r=M.format(Math.abs(t));return a.a.createElement("td",null,"$",Number.isNaN(r)?0:r)}var W=function(e){var t=e.scenario;return a.a.createElement("table",{className:"financial__values"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"4"},"Fixed Values")),a.a.createElement("tr",null,a.a.createElement("th",null,"Source"),a.a.createElement("th",null,"Value"),a.a.createElement("th",null,"Share"),a.a.createElement("th",null,"Disabled?"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"4"},"Incoming")),a.a.createElement(U,{entries:t.incoming,name:"In"})),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"4"},"Expenses")),a.a.createElement(U,{entries:t.expenses,name:"Out"})),a.a.createElement("tfoot",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"2"},"Yours"),a.a.createElement(R,{value:t.difference}),a.a.createElement(B,{value:t.difference/t.incoming.total}))))},T=r(157),V=r(156),_=r(159),z=r(155),$=r(153),G=r(154),Y=r(152);var H=function(e){var t=e.isInvalid,r=e.source,o=e.value,c=e.onChangeSource,i=e.onChangeValue,s=e.onClose,u=e.onCreate,l=Object(n.useState)("MY$ ".concat(parseFloat((100*Math.random()).toFixed(2)))),p=Object(A.a)(l,1)[0];return a.a.createElement(_.a,{open:!0,onClose:s,"aria-labelledby":"form-dialog-title"},a.a.createElement(Y.a,null,"Create Entry"),a.a.createElement($.a,null,a.a.createElement(G.a,null,"An entry is either an incoming or expense you have periodically."),a.a.createElement(V.a,{autoFocus:!0,margin:"dense",id:"source",label:"Where is the money coming from / going to?",type:"input",fullWidth:!0,placeholder:"salary, rent, etc",value:r.input,onChange:c,error:!!r.error,helperText:r.error}),a.a.createElement(V.a,{margin:"dense",id:"value",label:"How much?",type:"number",fullWidth:!0,placeholder:p,value:o.input,onChange:i,error:!!o.error,helperText:o.error||"Always use the same currency and up to two decimal places"})),a.a.createElement(z.a,null,a.a.createElement(T.a,{onClick:u,color:"primary",disabled:t},"Create"),a.a.createElement(T.a,{onClick:s,color:"primary"},"Close")))},q={input:"",error:null};function K(e){return e.length<3?"Use at least 3 characters to describe the source":e.length>20?"Use at most 20 characters to describe the source":null}function Q(e){var t=parseFloat(e);return Number.isFinite(t)&&0!==t?null:"Use a non-neutral number"}var X=function(e){var t=e.onClose,r=e.onCreateEntry,o=Object(n.useState)(q),c=Object(A.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(q),l=Object(A.a)(u,2),p=l[0],b=l[1],h=!(!K(i.input)&&!Q(p.input));return a.a.createElement(H,{isInvalid:h,source:i,value:p,onChangeSource:function(e){var t=e.target,r=t.value,n=K(r);s({input:r,error:n,target:t})},onChangeValue:function(e){var t=e.target.value,r=Q(t);b({input:t,error:r})},onClose:t,onCreate:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e={source:i.input,value:p.input},i.target.focus(),s(q),b(q),t.next=6,f.a.awrap(r(e));case 6:case"end":return t.stop()}}))}})};r(115);function Z(){return a.a.createElement("span",null,"LOADING...")}var ee=function(e){var t=e.scenario,r=e.isCreatingEntry,n=e.onOpenCreateEntryDialog,o=e.onCloseCreateEntryDialog,c=e.onCreateEntry;return t?a.a.createElement(a.a.Fragment,null,a.a.createElement(W,{scenario:t}),a.a.createElement("button",{className:"financial__create-button",onClick:n},"Create Entry"),r&&a.a.createElement(X,{onClose:o,onCreateEntry:c})):a.a.createElement(Z,null)};var te=function(e){var t=e.projection,r=e.onCreateEntry,o=e.onReadScenario,c=Object(n.useState)(null),i=Object(A.a)(c,2),s=i[0],u=i[1],l=Object(n.useState)(!1),p=Object(A.a)(l,2),b=p[0],h=p[1];return Object(n.useEffect)((function(){t&&o({onStart:Function.prototype,onError:function(e){return console.log("scenario",e)},onEnd:Function.prototype,onSuccess:u,projectionId:t.id})}),[o,t]),a.a.createElement(ee,{scenario:s,isCreatingEntry:b,onOpenCreateEntryDialog:function(){return h(!0)},onCloseCreateEntryDialog:function(){return h(!1)},onCreateEntry:function(e){var n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=function n(){return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(r({onStart:Function.prototype,onError:function(e){w.NotificationManager.error("Click here to retry","Creating entry failed",5e3,n,!0),console.log(e)},onEnd:Function.prototype,projectionId:t.id,entry:e}));case 2:case"end":return a.stop()}}))},a.next=3,f.a.awrap(n());case 3:case"end":return a.stop()}}))}})};function re(){return a.a.createElement("span",null,"LOADING...")}function ne(){return a.a.createElement("p",null,"The app is not working right now",a.a.createElement("br",null),"Retry in a few minutes")}function ae(e){var t=e.projection,r=e.onCreateEntry,n=e.onReadScenario;return a.a.createElement(a.a.Fragment,null,a.a.createElement(te,{projection:t,onCreateEntry:r,onReadScenario:n}))}var oe=function(e){var t=e.isLoading,r=e.hasLoadingError,n=Object(L.a)(e,["isLoading","hasLoadingError"]),o=t?re:r?ne:ae;return a.a.createElement("div",{className:"App"},a.a.createElement(w.NotificationContainer,null),a.a.createElement("main",{className:"App-main"},a.a.createElement(o,n)))},ce=Object(i.a)((function(e){var t=e.app;return Object(n.useEffect)((function(){t.init()}),[t]),a.a.createElement(oe,{isLoading:t.isLoading,hasLoadingError:t.hasLoadingError,projection:t.projection,onCreateEntry:t.createEntry,onReadScenario:t.readScenario})})),ie=new F(O,{onError:function(e){return console.log("error",e)}}),se=function(){return a.a.createElement(ce,{app:ie})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},41:function(e,t){e.exports=function(e){var t=e.id,r=e.title,n=e.timestamp,a=e.entries.filter((function(e){return!e.isDisabled}));return Object.assign(this,{id:t,title:r,timestamp:n,addEntry:function(e){e.isDisabled||a.push(e)}}),Object.defineProperty(this,"incoming",{get:function(){return a.filter((function(e){return e.value>0}))}}),Object.defineProperty(this,"expenses",{get:function(){return a.filter((function(e){return e.value<0}))}}),Object.freeze(this)}},55:function(e,t){e.exports=function(e){var t=e.id,r=e.source,n=e.value,a=e.isDisabled,o=void 0!==a&&a;return Object.assign(this,{id:t,source:r,value:parseFloat(n),isDisabled:o,share:function(e){if(Math.abs(e)<Math.abs(n))throw new Error("Share cannot be bigger than total");return n/e}}),Object.defineProperty(this,"errors",{get:function(){var e=[];return n&&("number"===typeof n||Number.isNaN(n))||e.push(new Error("Invalid entry value")),e}}),Object.freeze(this)}},56:function(e,t,r){var n=r(47),a=r(6),o=r(15);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var i={storages:{entry:r(85),projection:r(86)}};function s(e,t){var r=Object.entries(t).map((function(t){var r,o,c,i,s;return a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(r=n(t,2),o=r[0],c=r[1],i=e[o]){u.next=4;break}throw new Error("A drive for ".concat(o," was not found"));case 4:return u.next=6,a.awrap(i.readAll());case 6:return s=u.sent,u.abrupt("return",new c(s,e));case 8:case"end":return u.stop()}}))}));return Promise.all(r)}function u(e){var t=this;Object.assign(this,e),Object.entries(Object.getOwnPropertyDescriptors(e)).filter((function(e){var t=n(e,2);t[0];return"function"===typeof t[1].get})).forEach((function(e){var r=n(e,2),a=r[0],o=r[1];return Object.defineProperty(t,a,o)}))}e.exports=function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i,{},t).storages;return{init:function(){return a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.awrap(s(e,r));case 2:t.sent.forEach(u,this);case 4:case"end":return t.stop()}}),null,this)}}}},59:function(e,t,r){var n=r(15);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o={UseCase:r(103)};e.exports=function(e,t){var r=new(0,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{},t).UseCase)(e.storage);Object.assign(this,{create:function(e){try{if(!e.projectionId)throw new Error("Projection has not id to be identified");if(!e.entry)throw new Error("Entry has not been defined");if(!e.entry.source)throw new Error("Entry cannot be created without a source");if(!e.entry.value)throw new Error("Entry cannot be created without a value");return r.create(e)}catch(t){e.onError(t)}}})}},60:function(e,t,r){var n=r(15);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o={UseCase:r(105)};e.exports=function(e,t){var r=new(0,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{},t).UseCase)(e.storage);Object.assign(this,{create:function(e){try{if(!e.projection)throw new Error("Projection has not been defined");if(!e.projection.title)throw new Error("Projection cannot be created without a title");return r.create(e)}catch(t){e.onError(t)}}})}},61:function(e,t,r){var n=r(15);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o={UseCase:r(106)};e.exports=function(e,t){var r=new(0,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{},t).UseCase)(e.storage);Object.assign(this,{read:function(e){try{if(!e.projectionId)throw new Error("Projection has not id to be identified");return r.read(e)}catch(t){e.onError(t)}}})}},73:function(e,t,r){e.exports=r(116)},78:function(e,t,r){},85:function(e,t,r){var n=r(6),a=r(15);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t).entry;return Object.defineProperty(this,"entries",{get:function(){return Object.values(r)}}),Object.assign(this,{readEntryById:function(e){var t;return n.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw new Error("Missing ID when reading by ID");case 2:return a.next=4,n.awrap(c.read({id:e}));case 4:return t=a.sent,r[e]=t,a.abrupt("return",t);case 7:case"end":return a.stop()}}))},createEntry:function(e){var t;return n.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.awrap(c.create(e));case 2:return t=a.sent,r[t.id]=t,a.abrupt("return",t);case 5:case"end":return a.stop()}}))}})}},86:function(e,t,r){var n=r(6),a=r(15);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t).projection;return Object.defineProperty(this,"projections",{get:function(){return Object.values(r)}}),Object.assign(this,{readProjectionById:function(e){var t;return n.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw new Error("Missing ID when reading by ID");case 2:return a.next=4,n.awrap(c.read({id:e}));case 4:if(!(t=a.sent)){a.next=9;break}return a.next=8,n.awrap(Promise.all(t.entries.map(this.readEntryById)));case 8:t.entries=a.sent;case 9:return r[e]=t,a.abrupt("return",t);case 11:case"end":return a.stop()}}),null,this)},updateProjection:function(e){return n.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Missing projection to update");case 2:if(r[e.id]){t.next=5;break}throw new Error("Unkown projection canot be updated");case 5:return t.next=7,n.awrap(c.update(e));case 7:r[e.id]=e;case 8:case"end":return t.stop()}}))},createProjection:function(e){var t;return n.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.awrap(c.create(e));case 2:return t=a.sent,r[t.id]=t,a.abrupt("return",t);case 5:case"end":return a.stop()}}))}})}}},[[73,1,2]]]);
//# sourceMappingURL=main.db62554b.chunk.js.map