(this["webpackJsonpmy-web"]=this["webpackJsonpmy-web"]||[]).push([[0],{104:function(e,t,r){var n=r(6),a=r(16),o=r(43),c=r(44);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={Projection:r(45)},l=function(){"use strict";function e(t,r){o(this,e),this.create=this.create.bind({storage:t,dependencies:s({},u,{},r)})}return c(e,[{key:"create",value:function(e){var t,r,a;return n.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.dependencies.Projection,r={projection:null},e.onStart(),o.prev=3,a=new t(s({},e.projection,{entries:[]})),o.next=7,n.awrap(this.storage.createProjection(a));case 7:r.projection=o.sent,o.next=13;break;case 10:o.prev=10,o.t0=o.catch(3),e.onError(o.t0);case 13:return e.onEnd(),o.abrupt("return",r);case 15:case"end":return o.stop()}}),null,this,[[3,10]])}}]),e}();e.exports=l},105:function(e,t,r){var n=r(58),a=r(6),o=r(16),c=r(43),i=r(44);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={Entry:r(59),Projection:r(45),Scenario:r(107)},p=function(){"use strict";function e(t,r){c(this,e),this.read=this.read.bind({storage:t,dependencies:u({},l,{},r)})}return i(e,[{key:"read",value:function(e){var t;return a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={scenario:null},e.onStart(),r.prev=2,r.next=5,a.awrap(f.call(this,e));case 5:t.scenario=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),e.onError(r.t0);case 11:return e.onEnd(),r.abrupt("return",t);case 13:case"end":return r.stop()}}),null,this,[[2,8]])}}]),e}();function f(e){var t,r,n;return a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.dependencies.Scenario,o.next=3,a.awrap(b.call(this,e.projectionId));case 3:return r=o.sent,n=new t({projection:r}),e.onSuccess(n),o.abrupt("return",n);case 7:case"end":return o.stop()}}),null,this)}function b(e){var t,r,o,c,i,s,l;return a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return t=this.dependencies,r=t.Projection,o=t.Entry,p.next=3,a.awrap(this.storage.readProjectionById(e));case 3:return c=p.sent,i=c.entries,s=n(c,["entries"]),l=new r(u({},s,{entries:i.map((function(e){return new o(e)}))})),p.abrupt("return",l);case 8:case"end":return p.stop()}}),null,this)}e.exports=p},107:function(e,t,r){var n=r(108),a=r(16);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){var t=e.reduce((function(e,t){return e+t.value}),0);return{total:t,entries:e.reduce((function(e,r){return[].concat(n(e),[c({},r,{share:r.share(t)})])}),[])}}e.exports=function e(t){var r=t.projection;return Object.assign(this,{projectionId:r.id,clone:function(r){return new e(c({},t,{},r))}}),Object.defineProperty(this,"incoming",{get:function(){return i(r.incoming)}}),Object.defineProperty(this,"expenses",{get:function(){return i(r.expenses)}}),Object.defineProperty(this,"difference",{get:function(){return this.incoming.total+this.expenses.total}}),Object.freeze(this)}},112:function(e,t,r){var n=r(58),a=r(51),o=r(6),c=r(16),i=r(43),s=r(44);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={Entry:r(59),Projection:r(45)},f=function(){"use strict";function e(t,r){i(this,e),this.create=this.create.bind({storage:t,dependencies:l({},p,{},r)})}return s(e,[{key:"create",value:function(e){var t;return o.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={projection:null,entry:null},e.onStart(),r.prev=2,r.next=5,o.awrap(b.call(this,e));case 5:t=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),e.onError(r.t0);case 11:return e.onEnd(),r.abrupt("return",t);case 13:case"end":return r.stop()}}),null,this,[[2,8]])}}]),e}();function b(e){var t,r,n,c,i,s;return o.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.projectionId,r=e.entry,u.next=3,o.awrap(Promise.all([h.call(this,t),d.call(this,r)]));case 3:return n=u.sent,c=a(n,2),i=c[0],s=c[1],i.addEntry(s),u.next=10,o.awrap(this.storage.updateProjection(i));case 10:return u.abrupt("return",{projection:i,entry:s});case 11:case"end":return u.stop()}}),null,this)}function h(e){var t,r,a,c,i,s,u;return o.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e){p.next=2;break}throw new Error("Cannot create an entry without projectionId");case 2:return t=this.dependencies,r=t.Projection,a=t.Entry,p.next=5,o.awrap(this.storage.readProjectionById(e));case 5:return c=p.sent,i=c.entries,s=n(c,["entries"]),u=new r(l({},s,{entries:i.map((function(e){return new a(e)}))})),p.abrupt("return",u);case 10:case"end":return p.stop()}}),null,this)}function d(e){var t,r,n;return o.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw new Error("Cannot create an entry without its data");case 2:return t=this.dependencies.Entry,r=new t(e),a.next=6,o.awrap(this.storage.createEntry(r));case 6:return n=a.sent,a.abrupt("return",n);case 8:case"end":return a.stop()}}),null,this)}e.exports=f},113:function(e,t,r){},116:function(e,t,r){},117:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(9),c=r.n(o),i=(r(79),r(40)),s=r(60),u=r.n(s),l=r(26),p=r(6),f=r.n(p),b=function(){var e=JSON.parse(localStorage.getItem("my-money/app/nextEntryId")||0)+1;return localStorage.setItem("my-money/app/nextEntryId",e),e},h={read:function(e){var t,r,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,f.a.awrap(this.readAll());case 3:if(r=a.sent,n=r[t]){a.next=7;break}return a.abrupt("return");case 7:return a.abrupt("return",Object.assign({},n));case 8:case"end":return a.stop()}}),null,this)},create:function(e){var t,r;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(l.a)({},e,{id:b()}),n.next=3,f.a.awrap(this.readAll());case 3:if(!(r=n.sent)[t.id]){n.next=6;break}return n.abrupt("return",this.create(e));case 6:return r[t.id]=t,localStorage.setItem("my-money/entries",JSON.stringify(r)),n.abrupt("return",t);case 9:case"end":return n.stop()}}),null,this)},readAll:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("my-money/entries")||"{}",t.abrupt("return",JSON.parse(e));case 2:case"end":return t.stop()}}))}},d=r(46),y={read:function(e){var t,r,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,f.a.awrap(this.readAll());case 3:if(r=a.sent,n=r[t]){a.next=7;break}return a.abrupt("return");case 7:return a.abrupt("return",Object.assign({},n));case 8:case"end":return a.stop()}}),null,this)},update:function(e){var t,r,n,a,o;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,r=e.incoming,n=e.expenses,c.next=3,f.a.awrap(this.read({id:t}));case 3:if(a=c.sent){c.next=6;break}return c.abrupt("return");case 6:return a.entries=[].concat(Object(d.a)(r),Object(d.a)(n)).map((function(e){return e.id})),c.next=9,f.a.awrap(this.readAll());case 9:(o=c.sent)[t]=a,localStorage.setItem("my-money/projections",JSON.stringify(o));case 12:case"end":return c.stop()}}),null,this)},readAll:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("my-money/projections")||"{}",t.abrupt("return",JSON.parse(e));case 2:case"end":return t.stop()}}))},create:function(e){var t,r,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Date.now(),r=Object(l.a)({},e,{id:btoa(t),timestamp:t,entries:[]}),a.next=4,f.a.awrap(this.readAll());case 4:if(!(n=a.sent)[r.id]){a.next=7;break}return a.abrupt("return",this.create(e));case 7:return n[r.id]=r,localStorage.setItem("my-money/projections",JSON.stringify(n)),a.abrupt("return",r);case 10:case"end":return a.stop()}}),null,this)}},O=r(34),j=r(15),v=r(35),g=r(36),w=r(7),m=r(27),E=function(){function e(t){var r=this,n=t.storage,a=t.notifier,o=t.modules;Object(v.a)(this,e),this.storage=n,this.notifier=a,this.start=this.start.bind(this),this.modules=Object.entries(o).reduce((function(e,t){var n=Object(j.a)(t,2),a=n[0],o=n[1];return Object(l.a)({},e,Object(O.a)({},a,new o(r)))}),{})}return Object(g.a)(e,[{key:"start",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isStarting=!0,this.hasStartingFailure=!1,t.prev=2,t.next=5,f.a.awrap(this.storage.init());case 5:return e=Object.values(this.modules).map((function(e){return e.start()})),t.next=8,f.a.awrap(Promise.all(e));case 8:t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),this.hasStartingFailure=!0,console.log("error",t.t0),m.NotificationManager.error("Try again later","Initializing app failed",5e3);case 15:this.isStarting=!1;case 16:case"end":return t.stop()}}),null,this,[[2,10]])}}]),e}();Object(w.h)(E,{isStarting:w.m,hasStartingFailure:w.m,start:w.d});var x=E,P=r(61),S=r.n(P),D=r(62),C=r.n(D),k=r(63),I=r.n(k),N=function(){function e(t){Object(v.a)(this,e),this.app=t,this.handleEntryCreation=this.handleEntryCreation.bind(this)}return Object(g.a)(e,[{key:"start",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(F.call(this));case 2:return e=t.sent,t.next=5,f.a.awrap(A.call(this,e));case 5:case"end":return t.stop()}}),null,this)}},{key:"handleEntryCreation",value:function(e){var t,r,n,a=this;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(this.scenario){o.next=2;break}return o.abrupt("return");case 2:return t=new I.a(this.app),r=t.create,n=function t(){var n,o;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,f.a.awrap(r({onStart:Function.prototype,onError:function(e){m.NotificationManager.error("Click here to retry","Creating entry failed",5e3,t,!0),console.log(e)},onEnd:Function.prototype,projectionId:a.scenario.projectionId,entry:e}));case 2:n=c.sent,o=n.projection,a.scenario=a.scenario.clone({projection:o});case 5:case"end":return c.stop()}}))},o.next=6,f.a.awrap(n());case 6:case"end":return o.stop()}}),null,this)}}]),e}();function F(){var e,t,r,n,a,o;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.app.storage.projections,t=void 0===e?[]:e,r=Object(j.a)(t,1),!(n=r[0])){c.next=4;break}return c.abrupt("return",n);case 4:return c.next=6,f.a.awrap(L.call(this));case 6:return a=c.sent,o=a.projection,c.abrupt("return",o);case 9:case"end":return c.stop()}}),null,this)}function A(e){var t,r,n,a;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=new C.a(this.app),r=t.read,o.next=3,f.a.awrap(r({onStart:Function.prototype,onError:function(e){return console.log("scenario",e)},onEnd:Function.prototype,onSuccess:Function.prototype,projectionId:e.id}));case 3:n=o.sent,a=n.scenario,this.scenario=a;case 6:case"end":return o.stop()}}),null,this)}function L(){var e,t;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=new S.a(this.app),t=e.create,r.abrupt("return",t({projection:{title:"Standard"},onStart:Function.prototype,onError:function(e){throw e},onEnd:Function.prototype}));case 2:case"end":return r.stop()}}),null,this)}Object(w.h)(N,{scenario:w.m,start:w.d,handleEntryCreation:w.d});var M=N,U=new x({storage:new u.a({entry:h,projection:y}),notifier:{onError:function(e){console.log("error",e)}},modules:{financialScenario:M}});U.start();var J={application:U,financialScenario:U.modules.financialScenario},B=r(65),W=(r(113),r(114),Intl&&Intl.NumberFormat?new Intl.NumberFormat:{format:function(e){return e.toLocaleString?e.toLocaleString():e.toFixed(2)}});function z(e){var t=e.entries,r=t.entries,n=t.total,o=e.name;return a.a.createElement(a.a.Fragment,null,r.map(T),a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"3"},o),a.a.createElement(_,{value:n})))}function T(e){var t=e.id,r=e.source,n=e.value,o=e.isDisabled,c=e.share;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,r),a.a.createElement(_,{value:n}),a.a.createElement(V,{value:c}),a.a.createElement("td",null,a.a.createElement("input",{type:"checkbox",checked:o,disabled:!0})))}function V(e){var t=e.value,r=parseInt((100*t).toFixed(2),10);return a.a.createElement("td",null,Number.isNaN(r)?0:W.format(r)," %")}function _(e){var t=e.value,r=W.format(Math.abs(t));return a.a.createElement("td",null,"$",Number.isNaN(r)?0:r)}var R=function(e){var t=e.scenario;return a.a.createElement("table",{className:"financial__values"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"4"},"Fixed Values")),a.a.createElement("tr",null,a.a.createElement("th",null,"Source"),a.a.createElement("th",null,"Value"),a.a.createElement("th",null,"Share"),a.a.createElement("th",null,"Disabled?"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"4"},"Incoming")),a.a.createElement(z,{entries:t.incoming,name:"In"})),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"4"},"Expenses")),a.a.createElement(z,{entries:t.expenses,name:"Out"})),a.a.createElement("tfoot",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:"2"},"Yours"),a.a.createElement(_,{value:t.difference}),a.a.createElement(V,{value:t.difference/t.incoming.total}))))},$=r(158),G=r(157),Y=r(160),H=r(156),q=r(154),K=r(155),Q=r(153);var X=function(e){var t=e.isInvalid,r=e.source,o=e.value,c=e.onChangeSource,i=e.onChangeValue,s=e.onClose,u=e.onCreate,l=Object(n.useState)("MY$ ".concat(parseFloat((100*Math.random()).toFixed(2)))),p=Object(j.a)(l,1)[0];return a.a.createElement(Y.a,{open:!0,onClose:s,"aria-labelledby":"form-dialog-title"},a.a.createElement(Q.a,null,"Create Entry"),a.a.createElement(q.a,null,a.a.createElement(K.a,null,"An entry is either an incoming or expense you have periodically."),a.a.createElement(G.a,{autoFocus:!0,margin:"dense",id:"source",label:"Where is the money coming from / going to?",type:"input",fullWidth:!0,placeholder:"salary, rent, etc",value:r.input,onChange:c,error:!!r.error,helperText:r.error}),a.a.createElement(G.a,{margin:"dense",id:"value",label:"How much?",type:"number",fullWidth:!0,placeholder:p,value:o.input,onChange:i,error:!!o.error,helperText:o.error||"Always use the same currency and up to two decimal places"})),a.a.createElement(H.a,null,a.a.createElement($.a,{onClick:u,color:"primary",disabled:t},"Create"),a.a.createElement($.a,{onClick:s,color:"primary"},"Close")))},Z={input:"",error:null};function ee(e){return e.length<3?"Use at least 3 characters to describe the source":e.length>20?"Use at most 20 characters to describe the source":null}function te(e){var t=parseFloat(e);return Number.isFinite(t)&&0!==t?null:"Use a non-neutral number"}var re=function(e){var t=e.onClose,r=e.onCreateEntry,o=Object(n.useState)(Z),c=Object(j.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(Z),l=Object(j.a)(u,2),p=l[0],b=l[1],h=!(!ee(i.input)&&!te(p.input));return a.a.createElement(X,{isInvalid:h,source:i,value:p,onChangeSource:function(e){var t=e.target,r=t.value,n=ee(r);s({input:r,error:n,target:t})},onChangeValue:function(e){var t=e.target.value,r=te(t);b({input:t,error:r})},onClose:t,onCreate:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e={source:i.input,value:p.input},i.target.focus(),s(Z),b(Z),t.next=6,f.a.awrap(r(e));case 6:case"end":return t.stop()}}))}})};r(116);function ne(){return a.a.createElement("span",null,"LOADING...")}var ae=function(e){var t=e.scenario,r=e.isCreateEntryDialogOpen,n=e.onOpenCreateEntryDialog,o=e.onCloseCreateEntryDialog,c=e.onCreateEntry;return t?a.a.createElement(a.a.Fragment,null,a.a.createElement(R,{scenario:t}),a.a.createElement("button",{className:"financial__create-button",onClick:n},"Create Entry"),r&&a.a.createElement(re,{onClose:o,onCreateEntry:c})):a.a.createElement(ne,null)},oe=Object(i.a)((function(e){var t=e.model,r=Object(n.useState)(!1),o=Object(j.a)(r,2),c=o[0],i=o[1];return a.a.createElement(ae,{scenario:t.scenario,isCreateEntryDialogOpen:c,onOpenCreateEntryDialog:function(){return i(!0)},onCloseCreateEntryDialog:function(){return i(!1)},onCreateEntry:t.handleEntryCreation})})),ce=function(){return a.a.createElement(oe,{model:J.financialScenario})};function ie(){return a.a.createElement("span",null,"LOADING...")}function se(){return a.a.createElement("p",null,"The app is not working right now",a.a.createElement("br",null),"Retry in a few minutes")}function ue(e){var t=e.projection,r=e.onCreateEntry,n=e.onReadScenario;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ce,{projection:t,onCreateEntry:r,onReadScenario:n}))}var le=function(e){var t=e.isLoading,r=e.hasLoadingError,n=Object(B.a)(e,["isLoading","hasLoadingError"]),o=t?ie:r?se:ue;return a.a.createElement("div",{className:"App"},a.a.createElement(m.NotificationContainer,null),a.a.createElement("main",{className:"App-main"},a.a.createElement(o,n)))},pe=Object(i.a)((function(e){var t=e.app;return a.a.createElement(le,{isLoading:t.isStarting,hasLoadingError:t.hasStartingFailure})})),fe=function(){return a.a.createElement(pe,{app:J.application})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},45:function(e,t){e.exports=function(e){var t=e.id,r=e.title,n=e.timestamp,a=e.entries.filter((function(e){return!e.isDisabled}));return Object.assign(this,{id:t,title:r,timestamp:n,addEntry:function(e){e.isDisabled||a.push(e)}}),Object.defineProperty(this,"incoming",{get:function(){return a.filter((function(e){return e.value>0}))}}),Object.defineProperty(this,"expenses",{get:function(){return a.filter((function(e){return e.value<0}))}}),Object.freeze(this)}},59:function(e,t){e.exports=function(e){var t=e.id,r=e.source,n=e.value,a=e.isDisabled,o=void 0!==a&&a;return Object.assign(this,{id:t,source:r,value:parseFloat(n),isDisabled:o,share:function(e){if(Math.abs(e)<Math.abs(n))throw new Error("Share cannot be bigger than total");return n/e}}),Object.defineProperty(this,"errors",{get:function(){var e=[];return n&&("number"===typeof n||Number.isNaN(n))||e.push(new Error("Invalid entry value")),e}}),Object.freeze(this)}},60:function(e,t,r){var n=r(51),a=r(6),o=r(16);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var i={storages:{entry:r(86),projection:r(87)}};function s(e,t){var r=Object.entries(t).map((function(t){var r,o,c,i,s;return a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(r=n(t,2),o=r[0],c=r[1],i=e[o]){u.next=4;break}throw new Error("A drive for ".concat(o," was not found"));case 4:return u.next=6,a.awrap(i.readAll());case 6:return s=u.sent,u.abrupt("return",new c(s,e));case 8:case"end":return u.stop()}}))}));return Promise.all(r)}function u(e){var t=this;Object.assign(this,e),Object.entries(Object.getOwnPropertyDescriptors(e)).filter((function(e){var t=n(e,2);t[0];return"function"===typeof t[1].get})).forEach((function(e){var r=n(e,2),a=r[0],o=r[1];return Object.defineProperty(t,a,o)}))}e.exports=function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i,{},t).storages;return{init:function(){return a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.awrap(s(e,r));case 2:t.sent.forEach(u,this);case 4:case"end":return t.stop()}}),null,this)}}}},61:function(e,t,r){var n=r(16);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o={UseCase:r(104)};e.exports=function(e,t){var r=new(0,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{},t).UseCase)(e.storage);Object.assign(this,{create:function(e){try{if(!e.projection)throw new Error("Projection has not been defined");if(!e.projection.title)throw new Error("Projection cannot be created without a title");return r.create(e)}catch(t){e.onError(t)}}})}},62:function(e,t,r){var n=r(16);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o={UseCase:r(105)};e.exports=function(e,t){var r=new(0,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{},t).UseCase)(e.storage);Object.assign(this,{read:function(e){try{if(!e.projectionId)throw new Error("Projection has not id to be identified");return r.read(e)}catch(t){e.onError(t)}}})}},63:function(e,t,r){var n=r(16);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o={UseCase:r(112)};e.exports=function(e,t){var r=new(0,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{},t).UseCase)(e.storage);Object.assign(this,{create:function(e){try{if(!e.projectionId)throw new Error("Projection has not id to be identified");if(!e.entry)throw new Error("Entry has not been defined");if(!e.entry.source)throw new Error("Entry cannot be created without a source");if(!e.entry.value)throw new Error("Entry cannot be created without a value");return r.create(e)}catch(t){e.onError(t)}}})}},74:function(e,t,r){e.exports=r(117)},79:function(e,t,r){},86:function(e,t,r){var n=r(6),a=r(16);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t).entry;return Object.defineProperty(this,"entries",{get:function(){return Object.values(r)}}),Object.assign(this,{readEntryById:function(e){var t;return n.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw new Error("Missing ID when reading by ID");case 2:return a.next=4,n.awrap(c.read({id:e}));case 4:return t=a.sent,r[e]=t,a.abrupt("return",t);case 7:case"end":return a.stop()}}))},createEntry:function(e){var t;return n.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.awrap(c.create(e));case 2:return t=a.sent,r[t.id]=t,a.abrupt("return",t);case 5:case"end":return a.stop()}}))}})}},87:function(e,t,r){var n=r(6),a=r(16);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t).projection;return Object.defineProperty(this,"projections",{get:function(){return Object.values(r)}}),Object.assign(this,{readProjectionById:function(e){var t;return n.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw new Error("Missing ID when reading by ID");case 2:return a.next=4,n.awrap(c.read({id:e}));case 4:if(!(t=a.sent)){a.next=9;break}return a.next=8,n.awrap(Promise.all(t.entries.map(this.readEntryById)));case 8:t.entries=a.sent;case 9:return r[e]=t,a.abrupt("return",t);case 11:case"end":return a.stop()}}),null,this)},updateProjection:function(e){return n.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Missing projection to update");case 2:if(r[e.id]){t.next=5;break}throw new Error("Unkown projection canot be updated");case 5:return t.next=7,n.awrap(c.update(e));case 7:r[e.id]=e;case 8:case"end":return t.stop()}}))},createProjection:function(e){var t;return n.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.awrap(c.create(e));case 2:return t=a.sent,r[t.id]=t,a.abrupt("return",t);case 5:case"end":return a.stop()}}))}})}}},[[74,1,2]]]);
//# sourceMappingURL=main.f53d43f0.chunk.js.map