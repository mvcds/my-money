(this['webpackJsonpmy-web'] = this['webpackJsonpmy-web'] || []).push([[0], { 103: function (e, t, r) {}, 106: function (e, t, r) {}, 107: function (e, t, r) { var n = r(54); var a = r(47); var c = r(6); var o = r(15); var i = r(38); var s = r(39); function u (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r } function l (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? u(Object(r), !0).forEach(function (t) { o(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : u(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e } var p = { Entry: r(55), Projection: r(40) }; var f = (function () { 'use strict'; function e (t, r) { i(this, e), this.execute = this.execute.bind({ storage: t, dependencies: l({}, p, {}, r) }) } return s(e, [{ key: 'execute', value: function (e) { return c.async(function (t) { for (;;) switch (t.prev = t.next) { case 0:return e.onStart(), t.prev = 1, t.next = 4, c.awrap(b.call(this, e)); case 4:t.next = 9; break; case 6:t.prev = 6, t.t0 = t.catch(1), e.onError(t.t0); case 9:e.onEnd(); case 10:case 'end':return t.stop() } }, null, this, [[1, 6]]) } }]), e }()); function b (e) { var t, r, n, o, i, s; return c.async(function (u) { for (;;) switch (u.prev = u.next) { case 0:return t = e.projectionId, r = e.entry, u.next = 3, c.awrap(Promise.all([h.call(this, t), y.call(this, r)])); case 3:return n = u.sent, o = a(n, 2), i = o[0], s = o[1], i.addEntry(s), u.next = 10, c.awrap(this.storage.updateProjection(i)); case 10:case 'end':return u.stop() } }, null, this) } function h (e) { var t, r, a, o, i, s, u; return c.async(function (p) { for (;;) switch (p.prev = p.next) { case 0:return t = this.dependencies, r = t.Projection, a = t.Entry, p.next = 3, c.awrap(this.storage.readProjectionById(e)); case 3:return o = p.sent, i = o.entries, s = n(o, ['entries']), u = new r(l({}, s, { entries: i.map(function (e) { return new a(e) }) })), p.abrupt('return', u); case 8:case 'end':return p.stop() } }, null, this) } function y (e) { var t, r, n; return c.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return t = this.dependencies.Entry, r = new t(e), a.next = 4, c.awrap(this.storage.createEntry(r)); case 4:return n = a.sent, a.abrupt('return', n); case 6:case 'end':return a.stop() } }, null, this) }e.exports = f }, 109: function (e, t, r) { var n = r(6); var a = r(15); var c = r(38); var o = r(39); function i (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r } function s (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? i(Object(r), !0).forEach(function (t) { a(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : i(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e } var u = { Projection: r(40) }; var l = (function () { 'use strict'; function e (t, r) { c(this, e), this.execute = this.execute.bind({ storage: t, dependencies: s({}, u, {}, r) }) } return o(e, [{ key: 'execute', value: function (e) { var t, r; return n.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return t = this.dependencies.Projection, e.onStart(), a.prev = 2, r = new t(s({}, e.projection, { entries: [] })), a.next = 6, n.awrap(this.storage.createProjection(r)); case 6:a.next = 11; break; case 8:a.prev = 8, a.t0 = a.catch(2), e.onError(a.t0); case 11:e.onEnd(); case 12:case 'end':return a.stop() } }, null, this, [[2, 8]]) } }]), e }()); e.exports = l }, 110: function (e, t, r) { var n = r(54); var a = r(6); var c = r(15); var o = r(38); var i = r(39); function s (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r } function u (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? s(Object(r), !0).forEach(function (t) { c(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : s(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e } var l = { Entry: r(55), Projection: r(40), Scenario: r(111) }; var p = (function () { 'use strict'; function e (t, r) { o(this, e), this.execute = this.execute.bind({ storage: t, dependencies: u({}, l, {}, r) }) } return i(e, [{ key: 'execute', value: function (e) { return a.async(function (t) { for (;;) switch (t.prev = t.next) { case 0:return e.onStart(), t.prev = 1, t.next = 4, a.awrap(f.call(this, e)); case 4:t.next = 9; break; case 6:t.prev = 6, t.t0 = t.catch(1), e.onError(t.t0); case 9:e.onEnd(); case 10:case 'end':return t.stop() } }, null, this, [[1, 6]]) } }]), e }()); function f (e) { var t, r, n; return a.async(function (c) { for (;;) switch (c.prev = c.next) { case 0:return t = this.dependencies.Scenario, c.next = 3, a.awrap(b.call(this, e.projectionId)); case 3:r = c.sent, n = new t({ projection: r }), e.onSuccess(n); case 6:case 'end':return c.stop() } }, null, this) } function b (e) { var t, r, c, o, i, s, l; return a.async(function (p) { for (;;) switch (p.prev = p.next) { case 0:return t = this.dependencies, r = t.Projection, c = t.Entry, p.next = 3, a.awrap(this.storage.readProjectionById(e)); case 3:return o = p.sent, i = o.entries, s = n(o, ['entries']), l = new r(u({}, s, { entries: i.map(function (e) { return new c(e) }) })), p.abrupt('return', l); case 8:case 'end':return p.stop() } }, null, this) }e.exports = p }, 111: function (e, t, r) { var n = r(15); var a = r(112); function c (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r } function o (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? c(Object(r), !0).forEach(function (t) { n(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : c(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e } function i (e) { var t = e.reduce(function (e, t) { return e + t.value }, 0); return { total: t, entries: e.reduce(function (e, r) { return [].concat(a(e), [o({}, r, { share: r.share(t) })]) }, []) } }e.exports = function (e) { var t = e.projection; return Object.defineProperty(this, 'incoming', { get: function () { return i(t.incoming) } }), Object.defineProperty(this, 'expenses', { get: function () { return i(t.expenses) } }), Object.defineProperty(this, 'difference', { get: function () { return this.incoming.total + this.expenses.total } }), this } }, 116: function (e, t, r) { 'use strict'; r.r(t); var n = r(0); var a = r.n(n); var c = r(9); var o = r.n(c); var i = (r(78), r(63)); var s = r(41); var u = r(42); var l = r(6); var p = r.n(l); var f = r(56); var b = function () { var e = JSON.parse(localStorage.getItem('my-money/app/nextEntryId') || 0) + 1; return localStorage.setItem('my-money/app/nextEntryId', e), e }; var h = { read: function (e) { var t, r, n; return p.a.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return t = e.id, a.next = 3, p.a.awrap(this.readAll()); case 3:if (r = a.sent, n = r[t]) { a.next = 7; break } return a.abrupt('return'); case 7:return a.abrupt('return', Object.assign({}, n)); case 8:case 'end':return a.stop() } }, null, this) }, create: function (e) { var t, r; return p.a.async(function (n) { for (;;) switch (n.prev = n.next) { case 0:return t = Object(u.a)({}, e, { id: b() }), n.next = 3, p.a.awrap(this.readAll()); case 3:if (!(r = n.sent)[t.id]) { n.next = 6; break } return n.abrupt('return', this.create(e)); case 6:return r[t.id] = t, localStorage.setItem('my-money/entries', JSON.stringify(r)), n.abrupt('return', t); case 9:case 'end':return n.stop() } }, null, this) }, readAll: function () { var e; return p.a.async(function (t) { for (;;) switch (t.prev = t.next) { case 0:return e = localStorage.getItem('my-money/entries') || '{}', t.abrupt('return', JSON.parse(e)); case 2:case 'end':return t.stop() } }) } }; var y = { read: function (e) { var t, r, n; return p.a.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return t = e.id, a.next = 3, p.a.awrap(this.readAll()); case 3:if (r = a.sent, n = r[t]) { a.next = 7; break } return a.abrupt('return'); case 7:return a.abrupt('return', Object.assign({}, n)); case 8:case 'end':return a.stop() } }, null, this) }, update: function (e) { var t, r, n, a, c; return p.a.async(function (o) { for (;;) switch (o.prev = o.next) { case 0:return t = e.id, r = e.incoming, n = e.expenses, o.next = 3, p.a.awrap(this.read({ id: t })); case 3:if (a = o.sent) { o.next = 6; break } return o.abrupt('return'); case 6:return a.entries = [].concat(Object(s.a)(r), Object(s.a)(n)).map(function (e) { return e.id }), o.next = 9, p.a.awrap(this.readAll()); case 9:(c = o.sent)[t] = a, localStorage.setItem('my-money/projections', JSON.stringify(c)); case 12:case 'end':return o.stop() } }, null, this) }, readAll: function () { var e; return p.a.async(function (t) { for (;;) switch (t.prev = t.next) { case 0:return e = localStorage.getItem('my-money/projections') || '{}', t.abrupt('return', JSON.parse(e)); case 2:case 'end':return t.stop() } }) }, create: function (e) { var t, r, n; return p.a.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return t = Date.now(), r = Object(u.a)({}, e, { id: btoa(t), timestamp: t, entries: [] }), a.next = 4, p.a.awrap(this.readAll()); case 4:if (!(n = a.sent)[r.id]) { a.next = 7; break } return a.abrupt('return', this.create(e)); case 7:return n[r.id] = r, localStorage.setItem('my-money/projections', JSON.stringify(n)), a.abrupt('return', r); case 10:case 'end':return a.stop() } }, null, this) } }; var d = new (r.n(f).a)({ entry: h, projection: y }); var O = r(64); var g = r(26); var v = (r(103), r(104), r(22)); function j (e) { var t = e.entries; var r = t.entries; var n = t.total; var c = e.name; return a.a.createElement(a.a.Fragment, null, r.map(m), a.a.createElement('tr', null, a.a.createElement('th', { colSpan: '3' }, c), a.a.createElement(E, { value: n }))) } function m (e) { var t = e.id; var r = e.source; var n = e.value; var c = e.isDisabled; var o = e.share; return a.a.createElement('tr', { key: t }, a.a.createElement('td', null, r), a.a.createElement(E, { value: n }), a.a.createElement(w, { value: o }), a.a.createElement('td', null, a.a.createElement('input', { type: 'checkbox', checked: c, disabled: !0 }))) } function w (e) { var t = e.value; var r = parseInt((100 * t).toFixed(2), 10); return a.a.createElement('td', null, Number.isNaN(r) ? 0 : r, ' %') } function E (e) { var t = e.value.toFixed(2); return a.a.createElement('td', null, '$', Number.isNaN(t) ? 0 : Math.abs(t)) } var x = function (e) { var t = e.scenario; return a.a.createElement('table', { className: 'financial__values' }, a.a.createElement('thead', null, a.a.createElement('tr', null, a.a.createElement('th', { colSpan: '4' }, 'Fixed Values')), a.a.createElement('tr', null, a.a.createElement('th', null, 'Source'), a.a.createElement('th', null, 'Value'), a.a.createElement('th', null, 'Share'), a.a.createElement('th', null, 'Disabled?'))), a.a.createElement('tbody', null, a.a.createElement('tr', null, a.a.createElement('th', { colSpan: '4' }, 'Incoming')), a.a.createElement(j, { entries: t.incoming, name: 'In' })), a.a.createElement('tbody', null, a.a.createElement('tr', null, a.a.createElement('th', { colSpan: '4' }, 'Expenses')), a.a.createElement(j, { entries: t.expenses, name: 'Out' })), a.a.createElement('tfoot', null, a.a.createElement('tr', null, a.a.createElement('th', { colSpan: '2' }, 'Yours'), a.a.createElement(E, { value: t.difference }), a.a.createElement(w, { value: t.difference / t.incoming.total })))) }; var P = r(157); var S = r(156); var D = r(159); var C = r(155); var k = r(153); var I = r(154); var N = r(152); var F = function (e) { var t = e.isInvalid; var r = e.source; var c = e.value; var o = e.onChangeSource; var i = e.onChangeValue; var s = e.onClose; var u = e.onCreate; var l = Object(n.useState)('MY$ '.concat(parseFloat((100 * Math.random()).toFixed(2)))); var p = Object(v.a)(l, 1)[0]; return a.a.createElement(D.a, { open: !0, onClose: s, 'aria-labelledby': 'form-dialog-title' }, a.a.createElement(N.a, null, 'Create Entry'), a.a.createElement(k.a, null, a.a.createElement(I.a, null, 'An entry is either an incoming or expense you have periodically.'), a.a.createElement(S.a, { autoFocus: !0, margin: 'dense', id: 'source', label: 'Where is the money coming from / going to?', type: 'input', fullWidth: !0, placeholder: 'salary, rent, etc', value: r.input, onChange: o, error: !!r.error, helperText: r.error }), a.a.createElement(S.a, { margin: 'dense', id: 'value', label: 'How much?', type: 'number', fullWidth: !0, placeholder: p, value: c.input, onChange: i, error: !!c.error, helperText: c.error || 'Always use the same currency and up to two decimal places' })), a.a.createElement(C.a, null, a.a.createElement(P.a, { onClick: u, color: 'primary', disabled: t }, 'Create'), a.a.createElement(P.a, { onClick: s, color: 'primary' }, 'Close'))) }; var L = { input: '', error: null }; function A (e) { return e.length < 3 ? 'Use at least 3 characters to describe the source' : e.length > 20 ? 'Use at most 20 characters to describe the source' : null } function M (e) { var t = parseFloat(e); return Number.isFinite(t) && t !== 0 ? null : 'Use a non-neutral number' } var U = function (e) { var t = e.onClose; var r = e.onCreateEntry; var c = Object(n.useState)(L); var o = Object(v.a)(c, 2); var i = o[0]; var s = o[1]; var u = Object(n.useState)(L); var l = Object(v.a)(u, 2); var f = l[0]; var b = l[1]; var h = !(!A(i.input) && !M(f.input)); return a.a.createElement(F, { isInvalid: h, source: i, value: f, onChangeSource: function (e) { var t = e.target; var r = t.value; var n = A(r); s({ input: r, error: n, target: t }) }, onChangeValue: function (e) { var t = e.target.value; var r = M(t); b({ input: t, error: r }) }, onClose: t, onCreate: function () { var e; return p.a.async(function (t) { for (;;) switch (t.prev = t.next) { case 0:return e = { source: i.input, value: f.input }, i.target.focus(), s(L), b(L), t.next = 6, p.a.awrap(r(e)); case 6:case 'end':return t.stop() } }) } }) }; r(106); function J () { return a.a.createElement('span', null, 'LOADING...') } var B = function (e) { var t = e.scenario; var r = e.isCreatingEntry; var n = e.onOpenCreateEntryDialog; var c = e.onCloseCreateEntryDialog; var o = e.onCreateEntry; return t ? a.a.createElement(a.a.Fragment, null, a.a.createElement(x, { scenario: t }), a.a.createElement('button', { className: 'financial__create-button', onClick: n }, 'Create Entry'), r && a.a.createElement(U, { onClose: c, onCreateEntry: o })) : a.a.createElement(J, null) }; var R = function (e) { var t = e.projection; var r = e.onCreateEntry; var c = e.onReadScenario; var o = Object(n.useState)(null); var i = Object(v.a)(o, 2); var s = i[0]; var u = i[1]; var l = Object(n.useState)(!1); var f = Object(v.a)(l, 2); var b = f[0]; var h = f[1]; return Object(n.useEffect)(function () { t && c({ onStart: Function.prototype, onError: function (e) { return console.log('scenario', e) }, onEnd: Function.prototype, onSuccess: u, projectionId: t.id }) }, [c, t]), a.a.createElement(B, { scenario: s, isCreatingEntry: b, onOpenCreateEntryDialog: function () { return h(!0) }, onCloseCreateEntryDialog: function () { return h(!1) }, onCreateEntry: function (e) { var n; return p.a.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return n = function n () { return p.a.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return a.next = 2, p.a.awrap(r({ onStart: Function.prototype, onError: function (e) { g.NotificationManager.error('Click here to retry', 'Creating entry failed', 5e3, n, !0), console.log(e) }, onEnd: Function.prototype, projectionId: t.id, entry: e })); case 2:case 'end':return a.stop() } }) }, a.next = 3, p.a.awrap(n()); case 3:case 'end':return a.stop() } }) } }) }; function W () { return a.a.createElement('span', null, 'LOADING...') } function T () { return a.a.createElement('p', null, 'The app is not working right now', a.a.createElement('br', null), 'Retry in a few minutes') } function V (e) { var t = e.projection; var r = e.onCreateEntry; var n = e.onReadScenario; return a.a.createElement(a.a.Fragment, null, a.a.createElement(R, { projection: t, onCreateEntry: r, onReadScenario: n })) } var _ = function (e) { var t = e.isLoading; var r = e.hasLoadingError; var n = Object(O.a)(e, ['isLoading', 'hasLoadingError']); var c = t ? W : r ? T : V; return a.a.createElement('div', { className: 'App' }, a.a.createElement(g.NotificationContainer, null), a.a.createElement('main', { className: 'App-main' }, a.a.createElement(c, n))) }; var z = r(58); var $ = r(59); var G = r(7); var Y = r(60); var H = r.n(Y); var q = r(61); var K = r.n(q); var Q = r(62); var X = r.n(Q); var Z = (function () { function e (t, r) { Object(z.a)(this, e), this.storage = t, this.notifier = r, this.createEntry = new H.a(this).create, this.readScenario = new X.a(this).read } return Object($.a)(e, [{ key: 'init', value: function () { return p.a.async(function (e) { for (;;) switch (e.prev = e.next) { case 0:return e.prev = 0, e.next = 3, p.a.awrap(this.storage.init()); case 3:if (!this.isEmpty) { e.next = 6; break } return e.next = 6, p.a.awrap(ee.call(this)); case 6:te.call(this), e.next = 12; break; case 9:e.prev = 9, e.t0 = e.catch(0), re.call(this, e.t0); case 12:case 'end':return e.stop() } }, null, this, [[0, 9]]) } }, { key: 'isEmpty', get: function () { var e = this.storage.projections; return !(void 0 === e ? [] : e).length } }]), e }()); function ee () { var e; return p.a.async(function (t) { for (;;) switch (t.prev = t.next) { case 0:return e = new K.a(this).create, t.next = 3, p.a.awrap(e({ projection: { title: 'Standard' }, onStart: Function.prototype, onError: function (e) { throw e }, onEnd: Function.prototype })); case 3:case 'end':return t.stop() } }, null, this) } function te () { this.isLoading = !1, this.hasLoadingError = !1, this.projection = this.storage.projections[0] } function re (e) { g.NotificationManager.error('Try again later', 'Initializing app failed', 5e3), console.log(e), this.isLoading = !1, this.hasLoadingError = !0 }Object(G.h)(Z, { isLoading: G.m, hasLoadingError: G.m, projection: G.m, init: G.d }); var ne = Z; var ae = Object(i.a)(function (e) { var t = e.app; return Object(n.useEffect)(function () { t.init() }, [t]), a.a.createElement(_, { isLoading: t.isLoading, hasLoadingError: t.hasLoadingError, projection: t.projection, onCreateEntry: t.createEntry, onReadScenario: t.readScenario }) }); var ce = new ne(d, { onError: function (e) { return console.log('error', e) } }); var oe = function () { return a.a.createElement(ae, { app: ce }) }; Boolean(window.location.hostname === 'localhost' || window.location.hostname === '[::1]' || window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)); o.a.render(a.a.createElement(oe, null), document.getElementById('root')), 'serviceWorker' in navigator && navigator.serviceWorker.ready.then(function (e) { e.unregister() }) }, 40: function (e, t) { e.exports = function (e) { var t = e.id; var r = e.title; var n = e.timestamp; var a = e.entries.filter(function (e) { return !e.isDisabled }); return Object.assign(this, { id: t, title: r, timestamp: n, addEntry: function (e) { e.isDisabled || a.push(e) } }), Object.defineProperty(this, 'incoming', { get: function () { return a.filter(function (e) { return e.value > 0 }) } }), Object.defineProperty(this, 'expenses', { get: function () { return a.filter(function (e) { return e.value < 0 }) } }), Object.freeze(this) } }, 55: function (e, t) { e.exports = function (e) { var t = e.id; var r = e.source; var n = e.value; var a = e.isDisabled; var c = void 0 !== a && a; return Object.assign(this, { id: t, source: r, value: parseFloat(n), isDisabled: c, share: function (e) { if (Math.abs(e) < Math.abs(n)) throw new Error('Share cannot be bigger than total'); return n / e } }), Object.defineProperty(this, 'errors', { get: function () { var e = []; return n && (typeof n === 'number' || Number.isNaN(n)) || e.push(new Error('Invalid entry value')), e } }), Object.freeze(this) } }, 56: function (e, t, r) { var n = r(47); var a = r(6); var c = r(15); function o (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r } var i = { storages: { entry: r(85), projection: r(86) } }; function s (e, t) { var r = Object.entries(t).map(function (t) { var r, c, o, i, s; return a.async(function (u) { for (;;) switch (u.prev = u.next) { case 0:if (r = n(t, 2), c = r[0], o = r[1], i = e[c]) { u.next = 4; break } throw new Error('A drive for '.concat(c, ' was not found')); case 4:return u.next = 6, a.awrap(i.readAll()); case 6:return s = u.sent, u.abrupt('return', new o(s, e)); case 8:case 'end':return u.stop() } }) }); return Promise.all(r) } function u (e) { var t = this; Object.assign(this, e), Object.entries(Object.getOwnPropertyDescriptors(e)).filter(function (e) { var t = n(e, 2); t[0]; return typeof t[1].get === 'function' }).forEach(function (e) { var r = n(e, 2); var a = r[0]; var c = r[1]; return Object.defineProperty(t, a, c) }) }e.exports = function (e, t) { var r = (function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? o(Object(r), !0).forEach(function (t) { c(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : o(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e }({}, i, {}, t)).storages; return { init: function () { return a.async(function (t) { for (;;) switch (t.prev = t.next) { case 0:return t.next = 2, a.awrap(s(e, r)); case 2:t.sent.forEach(u, this); case 4:case 'end':return t.stop() } }, null, this) } } } }, 60: function (e, t, r) { var n = r(15); function a (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r } var c = { UseCase: r(107) }; e.exports = function (e, t) { var r = new (0, (function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? a(Object(r), !0).forEach(function (t) { n(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : a(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e }({}, c, {}, t)).UseCase)(e.storage); Object.assign(this, { create: r.execute }) } }, 61: function (e, t, r) { var n = r(15); function a (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r } var c = { UseCase: r(109) }; e.exports = function (e, t) { var r = new (0, (function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? a(Object(r), !0).forEach(function (t) { n(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : a(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e }({}, c, {}, t)).UseCase)(e.storage); Object.assign(this, { create: r.execute }) } }, 62: function (e, t, r) { var n = r(15); function a (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r } var c = { UseCase: r(110) }; e.exports = function (e, t) { var r = new (0, (function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? a(Object(r), !0).forEach(function (t) { n(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : a(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e }({}, c, {}, t)).UseCase)(e.storage); Object.assign(this, { read: r.execute }) } }, 73: function (e, t, r) { e.exports = r(116) }, 78: function (e, t, r) {}, 85: function (e, t, r) { var n = r(6); var a = r(15); function c (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r }e.exports = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; var t = arguments.length > 1 ? arguments[1] : void 0; var r = e; var o = (function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? c(Object(r), !0).forEach(function (t) { a(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : c(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e }({}, t)).entry; return Object.defineProperty(this, 'entries', { get: function () { return Object.values(r) } }), Object.assign(this, { readEntryById: function (e) { var t; return n.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:if (e) { a.next = 2; break } throw new Error('Missing ID when reading by ID'); case 2:return a.next = 4, n.awrap(o.read({ id: e })); case 4:return t = a.sent, r[e] = t, a.abrupt('return', t); case 7:case 'end':return a.stop() } }) }, createEntry: function (e) { var t; return n.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return a.next = 2, n.awrap(o.create(e)); case 2:return t = a.sent, r[t.id] = t, a.abrupt('return', t); case 5:case 'end':return a.stop() } }) } }) } }, 86: function (e, t, r) { var n = r(6); var a = r(15); function c (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, n) } return r }e.exports = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; var t = arguments.length > 1 ? arguments[1] : void 0; var r = e; var o = (function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? c(Object(r), !0).forEach(function (t) { a(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : c(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e }({}, t)).projection; return Object.defineProperty(this, 'projections', { get: function () { return Object.values(r) } }), Object.assign(this, { readProjectionById: function (e) { var t; return n.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:if (e) { a.next = 2; break } throw new Error('Missing ID when reading by ID'); case 2:return a.next = 4, n.awrap(o.read({ id: e })); case 4:if (!(t = a.sent)) { a.next = 9; break } return a.next = 8, n.awrap(Promise.all(t.entries.map(this.readEntryById))); case 8:t.entries = a.sent; case 9:return r[e] = t, a.abrupt('return', t); case 11:case 'end':return a.stop() } }, null, this) }, updateProjection: function (e) { return n.async(function (t) { for (;;) switch (t.prev = t.next) { case 0:if (e) { t.next = 2; break } throw new Error('Missing projection to update'); case 2:if (r[e.id]) { t.next = 5; break } throw new Error('Unkown projection canot be updated'); case 5:return t.next = 7, n.awrap(o.update(e)); case 7:r[e.id] = e; case 8:case 'end':return t.stop() } }) }, createProjection: function (e) { var t; return n.async(function (a) { for (;;) switch (a.prev = a.next) { case 0:return a.next = 2, n.awrap(o.create(e)); case 2:return t = a.sent, r[t.id] = t, a.abrupt('return', t); case 5:case 'end':return a.stop() } }) } }) } } }, [[73, 1, 2]]])
// # sourceMappingURL=main.3eae1845.chunk.js.map
